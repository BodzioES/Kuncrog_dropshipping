$(function(){const n=$("#sameAddressCheckbox"),o=$("#shipping-adress"),a=()=>{n.prop("checked")?o.hide():o.show()};a(),n.on("change",a),$(document).ready(function(){$('input[name="id_shipping_method"]').on("change",function(){const t=$(this).val();$.ajax({url:"/checkout/update-total",type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content"),id_shipping_method:t},success:function(e){$("#shippingCost").text(e.shippingCost+" zł"),$("#totalPrice").text(e.totalPrice+" zł")},error:function(){alert("Błąd podczas aktualizacji ceny dostawy")}})})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('input[name="shipping_method"]')}),document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#checkout-form").addEventListener("submit",async function(t){t.preventDefault();const e=new FormData(this);try{(await(await fetch("/checkout",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:e})).json()).success?Swal.fire("Sukces!","Zamówienie zostało złożone","success").then(()=>window.location.href="/"):await Swal.fire("Błąd!","Nie udało się zapisać zamówienia","error")}catch(i){console.error(i),await Swal.fire("Błąd!","Wystąpił problem z serwerem","error")}})})});
